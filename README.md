Доступ к синтаксическому анализатору журнала
Это скрипт Python, который анализирует файл журнала доступа Apache, извлекает соответствующие данные из каждой записи журнала и сохраняет их в базе данных MySQL.

Просмотор логов через консоль:
Для запуска этого скрипта вам потребуется:

Python 3.x установлен на вашем компьютере
Сервер MySQL работает
Файл журнала доступа Apache в следующем формате:
<ip_address> - - [<date>] "<protocol> <method> <url>" <status_code>

Пример:

127.0.0.1 - - [01/янв/2022:00:00:00 +0000] "HTTP/1.1 POST /api/v1/users" 200

Как запустить?
Клонируйте или скачайте этот репозиторий.
Установите необходимые пакеты Python, запустив pip install -r requirements.txt в своем терминале.
Применение
Перед запуском скрипта отредактируйте config.json, включив в него сведения о подключении к базе данных.

Чтобы проанализировать файл журнала доступа и сохранить данные в базу данных, выполните в терминале следующую команду:

python parser.py --log-file=<путь_к_файлу_журнала>
По умолчанию сценарий ищет файл журнала с именем access.log в текущем каталоге. Если вы хотите использовать другой файл журнала, укажите его путь с помощью параметра --log-file.

Вы также можете передать дополнительные параметры для фильтрации журналов по IP-адресу и/или диапазону дат. Например:

python parser.py --log-file=./logs/access.log --ip=127.0.0.1 --start-date=2022-01-01 --end-date=2022-01-31
При этом будут сохранены только записи журнала с IP-адресом 127.0.0.1 и датой между 1 января 2022 г. и 31 января 2022 г.

Чтобы просмотреть журналы, хранящиеся в базе данных, выполните следующую команду:

python viewer.py --ip=<необязательный_ip_адрес> --start-date=<необязательная_начальная_дата> --end-date=<необязательная_конечная_дата>
По умолчанию эта команда отображает все журналы, хранящиеся в базе данных. Вы можете фильтровать журналы по IP-адресу и/или диапазону дат, используя необязательные аргументы --ip, --start-date и --end-date.

Вы также можете передать путь к файлу конфигурации, используя параметр --config-file. Этот файл должен содержать параметры log_path и logs_mask, необходимые для поиска файлов журналов.


API формат просмотра логов:
Для запуска этого API вам потребуется:

Python 3.x установлен на вашем компьютере
Сервер MySQL работает
Необходимые пакеты Python перечислены в файле requirements.txt.
Клонируйте или скачайте этот репозиторий.
Установите необходимые пакеты Python, запустив pip install -r requirements.txt в своем терминале.
Отредактируйте config.json, чтобы включить сведения о подключении к базе данных.
Применение
Чтобы запустить API, перейдите в каталог проекта и выполните следующую команду в своем терминале:

python app.py

Это запустит сервер разработки Flask, а API будет доступен по адресу http://localhost:5000/logs.

Параметры запроса
ip: Фильтровать журналы по IP-адресу.
start_date: фильтровать журналы по дате начала (ГГГГ-ММ-ДД)
end_date: фильтрация журналов по дате окончания (ГГГГ-ММ-ДД)
Пример запроса
http://localhost:5000/logs?ip=127.0.0.1&start_date=2022-01-01&end_date=2022-01-31